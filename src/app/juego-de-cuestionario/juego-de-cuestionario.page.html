<ion-header class="juegos-header">
  <ion-toolbar class="header-toolbar">
    <ion-buttons slot="start">
      <ion-back-button *ngIf="!empezado" class="menu-btn"></ion-back-button>
      <!-- Remove (click)="popup()"  in the next line-->
      <ion-button *ngIf = "empezado" style ="font-size: 17.5px;">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title *ngIf = "juegoSeleccionado">{{juegoSeleccionado.NombreJuego}}</ion-title>
  </ion-toolbar>
</ion-header>
<!-- 
Esto es lo que se muestra si el juego aun no ha JuegoTerminado
Depende de si el alumno ha contestado las preguntas ya o aun no -->
<ion-content *ngIf = "juegoSeleccionado && juegoSeleccionado.Tipo === 'Juego De Cuestionario' && juegoSeleccionado.JuegoActivo && alumnoJuegoDeCuestionario">

    <!-- El alumno no ha contestado el cuestionario de tipo Clasico aun -->
    <div *ngIf="!alumnoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Clásico'; ">
        <ion-list *ngIf ="contar" style="text-align:center; height: 45px;">
          <ion-label   style = " color: red; font-size:xx-large;">{{tiempoRestante}}</ion-label>    
        </ion-list>

        <!-- Indicamos los botones de navegación para cada slide -->

        <!-- Slide 0: presentación del juego -->
        <div *ngIf = "slideActual === 0">
          <button class = "siguiente" mat-raised-button  (click)="IniciarTimer(); next()">Empezar</button>
        </div>
        <!-- Slides del 1 al N (uno para cada pregunta a contestar) -->
        <div *ngIf = "EstoyConPregunta()" >
          <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
          <button  class = "siguiente" (click) = "next()"mat-raised-button >Siguiente</button>
        </div>
        <!-- Slide N+1: fin de cuestionario -->
        <div  *ngIf = "slideActual === PreguntasCuestionario.length + 1">
          <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
          <button (click) = "ponerNota(); next()" class = "siguiente" mat-raised-button> Finalizar</button>
        </div>
        <!-- Slide N+2: resultados -->
        <div *ngIf = "slideActual === PreguntasCuestionario.length + 2">
          <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
        </div>
 
      
     
      
      <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
        <!-- Slide 0: presentación del juego -->
        <ion-slide>
          <ion-list   style="text-align: center;">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
    
          
            <br>
      
            <p><b>Descripción: </b>{{descripcion}}</p>
            <p *ngIf = "juegoSeleccionado.Modo === 'Individual'"><b>Tipo: </b>Clásico Individual</p>
            <p *ngIf = "(juegoSeleccionado.Modo === 'Equipos') && (juegoSeleccionado.Presentacion !== 'Primero')"><b>Tipo: </b>Clásico en Equipo</p>
            <p *ngIf = "(juegoSeleccionado.Modo === 'Equipos') && (juegoSeleccionado.Presentacion !== 'Primero')"><b>Modo de puntuación: </b>Puntua la MEDIA DE TODOS los miembros del equipo</p>
            <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
            <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
            <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
            <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
            <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
          </ion-list>

        
        </ion-slide>
        <!-- Slides del 1 al N (uno para cada pregunta a contestar) -->
        <ion-slide *ngFor="let item of preguntasYRespuestas; let i = index">
          
          <ion-list style="text-align:center">

            <div *ngIf ="item.pregunta.Tipo === 'Verdadero o falso'">
        
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>¿Verdadero o falso?</strong></h1></label>
              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

            
                <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "MarcarVerdaderoOFalso($event, i)">
          
                  <ion-item lines = "none" style = "width: 90%; margin-left: 10%;">
                    <ion-item lines = "none">
                      <p style="font-size: 15px;">Verdadero</p> 
                      <!-- Was removed checked due to ionic 5 migration  checked="{{seleccion[i][0]}}"-->
                      <ion-radio slot="start"  value="0" color="primary"></ion-radio>
                    </ion-item>
                    <ion-item lines = "none">
                      <p style="font-size: 15px;">Falso</p> 
                      <!-- Was removed checked due to ionic 5 migration  checked="{{seleccion[i][1]}}"-->
                      <ion-radio slot="start" value="1"  color="primary"></ion-radio>
                    </ion-item>
                  </ion-item>


            
                </ion-radio-group>
            
            </div>
            
            <div *ngIf ="item.pregunta.Tipo === 'Cuatro opciones'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19);"><strong>Elije la opción correcta</strong></h1></label>
              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
              
              <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "radioGroupChange($event, i)">
                  <ion-item *ngFor="let respuesta of item.respuestas; let j = index"  (ionChange)="radioSelect($event, i, j)">
                    <p style="font-size: 15px;">{{respuesta}}</p> 
                    <!-- Was removed checked due to ionic 5 migration  checked="{{seleccion[i][j]}}"-->
                    <ion-radio slot="start" value="{{j}}" color="primary"></ion-radio>
                  </ion-item>
              </ion-radio-group>
    
            </div>
             
            <div *ngIf ="item.pregunta.Tipo === 'Respuesta abierta'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Escribe tu respuesta</strong></h1></label>
              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
              <ion-input type="text" style = "color:rgb(38, 43, 105); font-size:x-large;" placeholder="Escribe tu respuesta aquí" requiered [(ngModel)]="RespuestasAlumno[i]"></ion-input>
            </div>

            <div *ngIf ="item.pregunta.Tipo === 'Emparejamiento'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Forma las parejas correctas</strong></h1></label>
              <label align = "center" style="color:rgb(109, 11, 19);"><strong>arrastrando la parte derecha <br>hasta la posición que le toca</strong></label>

              <br>
              <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
              <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

              <ion-item>
                <ion-list style = "width:50%">
                    <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                      <ion-item lines = "none">
                        <ion-label class="ion-text-wrap" style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>

                <ion-list style = "width:50%">
                  <ion-reorder-group (ionItemReorder)="reorderItems($event, i)" disabled="false">
            
                    <ion-item  *ngFor="let respuesta of item.respuestas; let j=index;">
                      <ion-item *ngIf = "contestar[i]" style = "width:100%" lines = "none">
                        <ion-label class="ion-text-wrap" style = "font-size: small;" >
                          {{respuesta}}
                        </ion-label>
                        <i class="material-icons" style = "color: gray">pan_tool</i> 
                        <ion-reorder  slot="end"> </ion-reorder>
                      </ion-item>
                    </ion-item>
                  </ion-reorder-group>
                </ion-list>
              </ion-item>

              <ion-button class="ranking-btn" *ngIf="contestar[i]" (click)="contestar[i]=false">Dejar sin contestar</ion-button>
              <ion-button class="ranking-btn" *ngIf="!contestar[i]" (click)="contestar[i]=true">Preparar para contestar</ion-button>
    

            </div>



          </ion-list>
          
        
        </ion-slide>
        <!-- Slide N+1: fin de cuestionario -->
        <ion-slide>
         
          <ion-list style="text-align:center">

              <div style="margin-top: 235px;">
                <p>Cuestionario realizado correctamente.</p>
                <p> Haga click en "Finalizar" para guardar los cambios.</p>
              </div>
          
         
          </ion-list>
          
        </ion-slide>
        <!-- Slide N+2: resultados -->
        <ion-slide>
          <ion-list style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
    
          
            <p style="font-size: 25px;">NOTA: <b>{{Nota}}</b> (sobre {{puntuacionMaxima}})</p>
         
           
              <ion-item *ngFor="let item of preguntasYRespuestas, let i = index">
                <ion-list *ngIf = "item.pregunta.Tipo === 'Cuatro opciones' || item.pregunta.Tipo === 'Verdadero o falso' || item.pregunta.Tipo === 'Respuesta abierta'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{item.pregunta.RespuestaCorrecta}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>
                <ion-list *ngIf = "item.pregunta.Tipo === 'Emparejamiento'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                  <ion-item *ngIf = "contestar[i]">
                    <ion-list>
                        <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos; let j=index">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{item.respuestas[j]}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>
                  <ion-item *ngIf = "!contestar[i]">
                    En blanco 
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                  <ion-item>
                    <ion-list>
                        <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.r}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>
              </ion-item>
          
        
          
          </ion-list>
        
        </ion-slide>
      </ion-slides>
    </div>

    
    <!-- El alumno no ha contestado el cuestionario de tipo Kahoot aun -->
    <div *ngIf="!alumnoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Kahoot'; ">
      <div>
        <ion-list *ngIf ="contar" style="text-align:right">
          <ion-label   style = "text-align: right; color: red; font-size: xx-large;">{{tiempoRestante}}</ion-label>    
        </ion-list>
        <!-- Aqui indico los botones de navegación que debe tener cada slideActual
        El slide 0 es el inicial. Se trata de esperar a que se lancen preguntas-->
     
        <div *ngIf = "slideActual === 0">
          <button class = "siguiente" mat-raised-button  (click)="ConfirmarPreparado(); next()">Empezar</button>
        </div>
        <!-- En el slide 1 es donde se muestran las preguntas. Solo debe aparecer el boton de ver respuestas cuando ya se han contestado todas -->
        <div *ngIf = "slideActual === 1 && tengoResultadoDelJuego">
          <button class = "siguiente" mat-raised-button  (click)="next()">Repasa tus <br>respuestas</button>
        </div>
        <!-- En el slide 2 se muestran las respuestas -->
        <div *ngIf = "slideActual === 2">
          <button (click) = "Cerrar()" class = "siguiente">Cerrar</button>
        </div>
       
    
        
        <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
          <!-- En el slide 0 hay información del juego -->
          <ion-slide>
            <ion-list   style="text-align: center;">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
    
            
              <br>
        
              <p><b>Descripción: </b>{{descripcion}}</p>
              <p><b>Tipo: </b>Kahoot</p>
              
              <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
              <p><b>Tiempo de respuesta para cada pregunta: </b>{{tiempoLimite}} segundos</p>
              <!-- <button class = "ion-float-right siguiente" (click) = "IniciarTimer()" matStepperNext><i class="material-icons">arrow_forward_ios</i></button> -->
            </ion-list>
    
          
          </ion-slide>
          <!-- En el slide 1 se irán mostrando las preguntas -->
          <ion-slide>
            <!-- Podemos estar en tres estados diferentes: Mostrando la pregunta, esperando mostrarla (cuenta atrás), o esperando resultado final
            cuando ya hemos contestado todas las preguntas (y mostrandolo cuando llega) -->
    
            <ion-list  *ngIf ="preguntaAMostrar" style="text-align:center">
              <!-- Muestro la pregunta -->
              <label><h1 style="color:rgb(109, 11, 19)"><strong>{{cuentaAtras2}}</strong></h1></label>
              <br>
      
    
              <div *ngIf ="preguntaAMostrar.Tipo === 'Verdadero o falso'">
          
                <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>¿Verdadero o falso?</strong></h1></label>
                <br>
                <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
                <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
                <div class = "enColumna">
                  <div class = "enFila" style = "width: 80%">
                    <div (click) = "GuardarRespuesta ('falso')" class = "opcion rojo"><p>Falso</p></div>
                    <div (click) = "GuardarRespuesta ('verdadero')"class = "opcion verde"><p>Verdadero</p></div>
                  </div>
                </div>
    
              </div>
              
              <div *ngIf ="preguntaAMostrar.Tipo === 'Cuatro opciones'">
                <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Elije la opción correcta</strong></h1></label>
                <br>
                <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
                <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
                <div class = "enColumna">
                  <div class = "enFila" style = "width: 80%">
                    <div (click) = "GuardarRespuesta (opcionesDesordenadas[0])" class = "opcion rojo"><p>{{opcionesDesordenadas[0]}}</p></div>
                    <div (click) = "GuardarRespuesta (opcionesDesordenadas[1])" class = "opcion verde"><p>{{opcionesDesordenadas[1]}}</p></div>
                  </div>
                  <div class = "enFila" style = "width: 80%">
                    <div (click) = "GuardarRespuesta (opcionesDesordenadas[2])" class = "opcion azul"><p>{{opcionesDesordenadas[2]}}</p></div>
                    <div (click) = "GuardarRespuesta (opcionesDesordenadas[3])" class = "opcion amarillo"><p>{{opcionesDesordenadas[3]}}</p></div>
                  </div>
                </div>
        
              </div>
              
              <div *ngIf ="preguntaAMostrar.Tipo === 'Respuesta abierta'">
                <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Escribe tu respuesta</strong></h1></label>
                <br>
                <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
                <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
                <ion-input type="text" style = "color:rgb(38, 43, 105); font-size:x-large;" placeholder="Escribe tu respuesta aquí" requiered [(ngModel)]="RespuestasAlumno[0]"></ion-input> 
                <br>
                <br>
                <br>
                <button class="enviarRespuestaKahoot"  (click) = "CalcularPuntosYEnviar();">Enviar respuesta</button>
              </div>
    
              <div *ngIf ="preguntaAMostrar.Tipo === 'Emparejamiento'">
                <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Forma las parejas correctas</strong></h1></label>
                <label align = "center" style="color:rgb(109, 11, 19);"><strong>arrastrando la parte derecha <br>hasta la posición que le toca</strong></label>
    
                <br>
                <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
                <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
    
                <ion-item>
                  <ion-list style = "width:40%">
                      <ion-item  *ngFor="let pareja of preguntaAMostrar.Emparejamientos">
                        <ion-item lines = "none">
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
    
                  <ion-list style = "width:60%">
                    <ion-reorder-group (ionItemReorder)="ReordenarRespuestas($event)" disabled="false">
              
                      <ion-item  *ngFor="let respuesta of RespuestasAlumno; let j=index;">
                        <ion-item *ngIf = "contestarEmparejamiento" style = "width:100%" lines = "none">
                          <ion-label style = "font-size: small;" >
                            {{respuesta}}
                          </ion-label>
                          <i class="material-icons" style = "color: gray">pan_tool</i> 
                          <ion-reorder  slot="end"> </ion-reorder>
                        </ion-item>
                      </ion-item>
                    </ion-reorder-group>
                  </ion-list>
                </ion-item>
    
                <ion-button class="ranking-btn" *ngIf="contestarEmparejamiento" (click)="contestarEmparejamiento=false">Dejar sin contestar</ion-button>
                <ion-button class="ranking-btn" *ngIf="!contestarEmparejamiento" (click)="contestarEmparejamiento=true">Preparar para contestar</ion-button>
                <br>
                <br>
                <br>
                <button class="enviarRespuestaKahoot"  (click) = "CalcularPuntosYEnviar();">Enviar respuesta</button>
          
    
    
              </div>
    
              
            </ion-list>
            
            <ion-list  *ngIf ="!preguntaAMostrar && !finDelJuego" style="text-align:center">
              <!-- Muestro la cuenta atrás para presentar la siguiente pregunta -->
              <br>
              <br>
              <br>
              <br>
              <label style="color:rgb(109, 11, 19); font-size: large;"><strong>Pregunta {{siguiente + 1}} de {{PreguntasCuestionario.length}} en ...</strong></label>
              <br>
              <br>
              <br>
              <br>
    
              <label *ngIf = "cuentaAtras > 0" style="color:rgb(109, 11, 19); font-size: 15em;"><strong>{{cuentaAtras}}</strong></label>
    
            </ion-list>
            <ion-list  *ngIf ="!preguntaAMostrar && finDelJuego" style="text-align:center">
              <!-- Espero la llegada del resultado -->
              <br>
              <br>
              <br>
              <br>
              <label style="color:rgb(109, 11, 19); font-size: large;">Fin del juego<br> Esperando resultado ...</label>
              <br>
              <br>
              <br>
              <br>
              <!-- Cuando ya tengo el resultado lo muestro -->
              <div *ngIf = "tengoResultadoDelJuego">
                <label style="color:rgb(109, 11, 19); font-size:xx-large;">Clasificación final</label>
                <br>
                <br>
                <ion-list style = "width: 80%; margin-left: 15%;">
                  <ion-item  *ngFor="let item of clasificacion">
                    <ion-item lines = "none" style = "width:30%">
                      <ion-label>
                        {{item.alumno.Nombre}}
                      </ion-label>
                    </ion-item>
                    <ion-item lines = "none" style = "width:30%">
                      <ion-label>
                        {{item.alumno.PrimerApellido}}
                      </ion-label>
                    </ion-item>
                    <ion-item lines = "none" style = "width:20%">
                      <ion-label  style = "color: green;">
                        {{item.puntos}}
                      </ion-label>
                    </ion-item>
                  </ion-item>
                </ion-list>
              </div>
    
            </ion-list>
          
          </ion-slide>
           <!-- En el slide 2 mostramos las respuestas que ha dado el alumno -->
          <ion-slide>
            <ion-list *ngIf = "slideActual === 2" style="text-align:center">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Tus respuestas</strong></h1></label>
  
                <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
                  <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                    <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{respuestasKahoot[i][0]}}</label></ion-item>
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                  </ion-list>
                  <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                    <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                    <ion-item *ngIf = "contestar[i]">
                      <ion-list>
                          <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                            <ion-item lines = "none" style = "width: 50%">
                              <ion-label  style = "font-size: small;">
                                {{pareja.l}}
                              </ion-label>
                            </ion-item>
                            <ion-item lines = "none" style = "width: 50%">
               
                              <ion-label *ngIf= "respuestasKahoot[i]" style = "font-size: small;">
                                {{respuestasKahoot[i][j]}}
                              </ion-label>
                            </ion-item>
                          </ion-item>
                      </ion-list>
                    </ion-item>
                    <ion-item *ngIf = "!contestar[i]">
                      En blanco 
                    </ion-item>
    
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                    <ion-item>
                      <ion-list>
                          <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                            <ion-item lines = "none" style = "width: 50%">
                              <ion-label  style = "font-size: small;">
                                {{pareja.l}}
                              </ion-label>
                            </ion-item>
                            <ion-item lines = "none" style = "width: 50%">
                              <ion-label  style = "font-size: small;">
                                {{pareja.r}}
                              </ion-label>
                            </ion-item>
                          </ion-item>
                      </ion-list>
                    </ion-item>
    
                    <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                  </ion-list>
                </ion-item>

            </ion-list>
          </ion-slide>
        </ion-slides>
      </div>
    </div>

    <!-- El alumno ya ha contestado este cuestionario de tipo clasico -->
    <div *ngIf="alumnoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Clásico'">
      <!-- En este caso solo hay dos slides: la de presentación del cuestionario y la que muestra las respuestas que dió el alumno -->
  
      <!-- Indico los botones de navegación de cada slide -->
      <div *ngIf = "slideActual === 0">
        <button class = "siguiente" style = "width: 150px" mat-raised-button  (click)="next(); empezado=true">Ver tus respuestas</button>
      </div>
      <div *ngIf = "slideActual === 1">
        <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
        <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
      </div>
      
      <ion-slides style = "margin-top: 18%;"  #slides (ionSlideWillChange)="doCheck()" >
        <!-- Slide 0 con información del juego -->
        <ion-slide>
          <ion-list   style="text-align: center;">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
    
          
            <br>
      
            <p><b>Descripción: </b>{{descripcion}}</p>
            <p *ngIf = "juegoSeleccionado.Modo === 'Individual'"><b>Tipo: </b>Clásico Individual</p>
            <p *ngIf = "(juegoSeleccionado.Modo === 'Equipos') && (juegoSeleccionado.Presentacion !== 'Primero')"><b>Tipo: </b>Clásico en Equipo</p>
            <p *ngIf = "(juegoSeleccionado.Modo === 'Equipos') && (juegoSeleccionado.Presentacion !== 'Primero')"><b>Modo de puntuación: </b>Puntua la MEDIA DE TODOS los miembros del equipo</p>
           
            <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
            <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
            <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
            <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
            <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
            <br>
            <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
            <p style="font-size: 18px;">La nota obtenida es de: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
    
          </ion-list>
        </ion-slide>

        <!-- Slide 1 con las respuestas que dió el alumno -->
        <ion-slide>
          <ion-list *ngIf = "PreguntasCuestionario && imagenesPreguntas" style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
    
          
            <p style="font-size: 25px;">NOTA: <b>{{alumnoJuegoDeCuestionario.Nota}}</b> (sobre {{puntuacionMaxima}})</p>
        
          
              <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
                <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>

                <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                  <ion-item *ngIf = "contestar[i]">
                    <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
                    <ion-list style = "width: 200%">
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{respuestasEmparejamientos[i][j]}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>
                  <ion-item *ngIf = "!contestar[i]">
                    En blanco 
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                  <ion-item>
                    <ion-list style = "width: 200%">
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                          <ion-item lines = "none" style = "width: 50%" >
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%" >
                            <ion-label  style = "font-size: small;">
                              {{pareja.r}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>



              </ion-item>
          </ion-list>
        
        </ion-slide>
      </ion-slides>
    </div>

    <!-- El alumno ya ha contestado este cuestionario de tipo Kahoot -->
    <div *ngIf="alumnoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Kahoot'">
      <!-- En este caso solo hay dos slides: la de presentación del cuestionario y la que muestra las respuestas que dió el alumno -->
      <!-- Indico los botones de navegación de cada slide -->
      <div *ngIf = "slideActual === 0">
        <button class = "siguiente" style = "width: 150px" mat-raised-button  (click)="next()">Ver tus respuestas</button>
      </div>
      <div *ngIf = "slideActual === 1">
        <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
        <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
      </div>
      
      <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
        <!-- Slide 0 con información del juego -->
        <ion-slide>
          <ion-list   style="text-align: center;">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
          
            <br>
      
            <p><b>Descripción: </b>{{descripcion}}</p>
            <p><b>Tipo: </b>Kahoot</p>
            
            <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
            <p><b>Tiempo de respuesta para cada pregunta: </b>{{tiempoLimite}} segundos</p>
            <br>
            <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
            <p style="font-size: 18px;">Los puntos obtenidos son: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
            
          </ion-list>
  
        
        </ion-slide>

        <!-- Slide 1 con las respuestas que dió el alumno -->
        <ion-slide>
          <ion-list *ngIf = "respuestasPreparadas" style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
    
          
            <p style="font-size: 25px;">PUNTOS: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
        
          
              <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
                <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>

                <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                  <ion-item *ngIf = "contestar[i]">
                    <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
                    <ion-list style = "width: 200%">
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{respuestasEmparejamientos[i][j]}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>
                  <ion-item *ngIf = "!contestar[i]">
                    En blanco 
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                  <ion-item>
                    <ion-list style = "width: 200%">
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                          <ion-item lines = "none" style = "width: 50%" >
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%" >
                            <ion-label  style = "font-size: small;">
                              {{pareja.r}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>

                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>



              </ion-item>
          </ion-list>
        
        </ion-slide>
      </ion-slides>
    </div>

</ion-content>

<!-- Esto es para el caso de que el juego ya haya terminado -->
<ion-content *ngIf = "juegoSeleccionado && juegoSeleccionado.Tipo === 'Juego De Cuestionario' && juegoSeleccionado.JuegoTerminado && alumnoJuegoDeCuestionario">
    <!-- En este caso tenemos 3 slides: presentación del juego, presentación de la clasificación final y presentación de las respuestas que dió el alumnoJuegoDeCuestionario

    Defino los botones de navegación de los slides -->
    <div *ngIf = "slideActual === 0">
      <button  class = "siguiente" style = "width: 180px" mat-raised-button  (click)="next()">Ver clasificación final</button>
    </div>
    <div *ngIf = "slideActual === 1">
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button (click) = "next()" class = "siguiente" style = "width: 150px">Ver tus respuestas</button>
    </div>
    <div *ngIf = "slideActual === 2">
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button (click) = "Volver()" class = "siguiente">Cerrar</button>
    </div>
    
    <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
      <!-- Slide 0: datos del juego -->
      <ion-slide>
        <ion-list *ngIf="juegoSeleccionado.Modalidad === 'Clásico' "  style="text-align: center;">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
        
          <br>
    
          <p><b>Descripción: </b>{{descripcion}}</p>
          <p *ngIf = "juegoSeleccionado.Modo === 'Individual'"><b>Tipo: </b>Clásico Individual</p>
          <p *ngIf = "(juegoSeleccionado.Modo === 'Equipos') && (juegoSeleccionado.Presentacion !== 'Primero')"><b>Tipo: </b>Clásico en Equipo</p>
          <p *ngIf = "(juegoSeleccionado.Modo === 'Equipos') && (juegoSeleccionado.Presentacion !== 'Primero')"><b>Modo de puntuación: </b>Puntua la MEDIA DE TODOS los miembros del equipo</p>
           
          <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
          <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
          <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
          <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
          <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
          <br>
          <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
          <p style="font-size: 18px;">La nota obtenida es de: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
  
        </ion-list>

        <ion-list  *ngIf="juegoSeleccionado.Modalidad === 'Kahoot' " style="text-align: center;">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
        
          <br>
    
          <p><b>Descripción: </b>{{descripcion}}</p>
          <p><b>Tipo: </b>Kahoot</p>

          <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
          <p><b>Tiempo de respuesta para cada pregunta: </b>{{tiempoLimite}} segundos</p>
          <br>
          <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
          <p style="font-size: 18px;">Los puntos obtenidos son: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
  
        </ion-list>
      </ion-slide>
      <!-- Slide 1: clasificación final del juego -->
      <ion-slide>
        <ion-list style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Clasificación final</strong></h1></label>
            <br>
            <!-- El juego puede ser individual o en equipo puntuando la media -->
            <ion-list *ngIf ="juegoSeleccionado.Modo === 'Individual'">
              <ion-item  lines = "none"*ngFor="let alum of rankingAlumnosPorNota">
                <ion-item lines = "none" style = "width: 20%">
                  <img  *ngIf = "alum.imagenPerfil" style = "width:40px; height: 40px;" [src]="alum.imagenPerfil"> 
                </ion-item>
                <ion-item lines = "none" style = "width: 60%">
                  <ion-label > {{alum.nombre}} {{alum.primerApellido}} </ion-label>
                </ion-item>
                <ion-item lines = "none" style = "text-align:rigth">
                  <ion-label style= " color: green"> {{alum.nota}}</ion-label>
                </ion-item>
              </ion-item>
            </ion-list>

            <ion-list *ngIf ="(juegoSeleccionado.Modo === 'Equipos') && (juegoSeleccionado.Presentacion !== 'Primero')">
              <ion-item  lines = "none"*ngFor="let equipo of rankingEquiposPorNota">
                <ion-item lines = "none" style = "width: 20%">
                  <img  *ngIf = "equipo.imagenPerfil" style = "width:40px; height: 40px;" [src]="equipo.imagenPerfil"> 
                </ion-item>
                <ion-item lines = "none" style = "width: 60%">
                  <ion-label > {{equipo.nombre}}</ion-label>
                </ion-item>
                <ion-item lines = "none" style = "text-align:rigth">
                  <ion-label style= " color: green"> {{equipo.nota}}</ion-label>
                </ion-item>
              </ion-item>
            </ion-list>

        </ion-list>
      </ion-slide>

      <!-- Slide 2: respuestas que dio el alumno -->
      <ion-slide>
        <ion-list *ngIf = "PreguntasCuestionario && imagenesPreguntas" style="text-align:center">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Tus respuestas</strong></h1></label>
  
        
          <p style="font-size: 25px;">NOTA: <b>{{alumnoJuegoDeCuestionario.Nota}}</b> (sobre {{puntuacionMaxima}})</p>




          
          <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
            <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
              <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
            </ion-list>

            <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
              <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
              <ion-item *ngIf = "contestar[i]">
                <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
                <ion-list style = "width: 200%">
                    <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                      <ion-item lines = "none" style = "width: 50%">
                        <ion-label  style = "font-size: small;">
                          {{respuestasEmparejamientos[i][j]}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>
              </ion-item>
              <ion-item *ngIf = "!contestar[i]">
                En blanco 
              </ion-item>

              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
              <ion-item>
                <ion-list style = "width: 200%">
                    <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                      <ion-item lines = "none" style = "width: 50%" >
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                      <ion-item lines = "none" style = "width: 50%" >
                        <ion-label  style = "font-size: small;">
                          {{pareja.r}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>
              </ion-item>

              <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
            </ion-list>



          </ion-item>
      
        </ion-list>
      
      </ion-slide>
    </ion-slides>
</ion-content>

<!-- Hacemos lo mismo si el juego es en equipo -->
<ion-content *ngIf = "juegoSeleccionado && juegoSeleccionado.Tipo === 'Juego De Cuestionario' && juegoSeleccionado.JuegoActivo && equipoJuegoDeCuestionario">
  <!-- El equipo no ha contestado el cuestionario de tipo Clasico aun -->
  <div *ngIf="!equipoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Clásico'; ">
      <ion-list *ngIf ="contar" style="text-align:center; height: 45px;">
        <ion-label   style = " color: red; font-size:xx-large;">{{tiempoRestante}}</ion-label>    
      </ion-list>

      <!-- Indicamos los botones de navegación para cada slide -->

      <!-- Slide 0: presentación del juego -->
      <div *ngIf = "slideActual === 0">
        <button class = "siguiente" mat-raised-button  (click)="IniciarTimer(); next()">Empezar</button>
      </div>
      <!-- Slides del 1 al N (uno para cada pregunta a contestar) -->
      <div *ngIf = "EstoyConPregunta()" >
        <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
        <button  class = "siguiente" (click) = "next()"mat-raised-button >Siguiente</button>
      </div>
      <!-- Slide N+1: fin de cuestionario -->
      <div  *ngIf = "slideActual === PreguntasCuestionario.length + 1">
        <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
        <button (click) = "ponerNota(); next()" class = "siguiente" mat-raised-button> Finalizar</button>
      </div>
      <!-- Slide N+2: resultados -->
      <div *ngIf = "slideActual === PreguntasCuestionario.length + 2">
        <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
      </div>

    
   
    
    <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
      <!-- Slide 0: presentación del juego -->
      <ion-slide>
        <ion-list   style="text-align: center;">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
        
          <br>
    
          <p><b>Descripción: </b>{{descripcion}}</p>
          <p><b>Tipo: </b>Clásico, en equipo </p>
          <p><b>Modo de puntuación: </b>Puntua el PRIMERO del equipo que responda</p>
           
          <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
          <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
          <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
          <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
          <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
        </ion-list>

      
      </ion-slide>
      <!-- Slides del 1 al N (uno para cada pregunta a contestar) -->
      <ion-slide *ngFor="let item of preguntasYRespuestas; let i = index">
        
        <ion-list style="text-align:center">

          <div *ngIf ="item.pregunta.Tipo === 'Verdadero o falso'">
      
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>¿Verdadero o falso?</strong></h1></label>
            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

          
              <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "MarcarVerdaderoOFalso($event, i)">
        
                <ion-item lines = "none" style = "width: 90%; margin-left: 10%;">
                  <ion-item lines = "none">
                    <p style="font-size: 15px;">Verdadero</p> 
                    <!-- Was removed checked="{{seleccion[i][0]}}" -->
                    <ion-radio slot="start"  value="0" color="primary"></ion-radio>
                  </ion-item>
                  <ion-item lines = "none">
                    <p style="font-size: 15px;">Falso</p>
                    <!-- Was removed checked="{{seleccion[i][1]}}" --> 
                    <ion-radio slot="start" value="1" color="primary"></ion-radio>
                  </ion-item>
                </ion-item>


          
              </ion-radio-group>
          
          </div>
          
          <div *ngIf ="item.pregunta.Tipo === 'Cuatro opciones'">
            <label align = "center"><h1 style="color:rgb(109, 11, 19);"><strong>Elije la opción correcta</strong></h1></label>
            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
            
            <ion-radio-group allow-empty-selection="true" name="radio-group" #radioGroup (ionChange) = "radioGroupChange($event, i)">
                <ion-item *ngFor="let respuesta of item.respuestas; let j = index"  (ionChange)="radioSelect($event, i, j)">
                  <p style="font-size: 15px;">{{respuesta}}</p> 
                   <!-- Was removed checked="{{seleccion[i][j]}}" --> 
                  <ion-radio slot="start" value="{{j}}" color="primary"></ion-radio>
                </ion-item>
            </ion-radio-group>
  
          </div>
           
          <div *ngIf ="item.pregunta.Tipo === 'Respuesta abierta'">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Escribe tu respuesta</strong></h1></label>
            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>
            <ion-input type="text" style = "color:rgb(38, 43, 105); font-size:x-large;" placeholder="Escribe tu respuesta aquí" requiered [(ngModel)]="RespuestasAlumno[i]"></ion-input>
          </div>

          <div *ngIf ="item.pregunta.Tipo === 'Emparejamiento'">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Forma las parejas correctas</strong></h1></label>
            <label align = "center" style="color:rgb(109, 11, 19);"><strong>arrastrando la parte derecha <br>hasta la posición que le toca</strong></label>

            <br>
            <img *ngIf = "item.pregunta.Imagen" style = "width: 250px; height: 250px" [src]="imagenesPreguntas[i]" >
            <p style="font-size: 18px;">{{item.pregunta.Pregunta}}</p>

            <ion-item>
              <ion-list style = "width:50%">
                  <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                    <ion-item lines = "none">
                      <ion-label class="ion-text-wrap" style = "font-size: small;">
                        {{pareja.l}}
                      </ion-label>
                    </ion-item>
                  </ion-item>
              </ion-list>

              <ion-list style = "width:50%">
                <ion-reorder-group (ionItemReorder)="reorderItems($event, i)" disabled="false">
          
                  <ion-item  *ngFor="let respuesta of item.respuestas; let j=index;">
                    <ion-item *ngIf = "contestar[i]" style = "width:100%" lines = "none">
                      <ion-label class="ion-text-wrap" style = "font-size: small;" >
                        {{respuesta}}
                      </ion-label>
                      <i class="material-icons" style = "color: gray">pan_tool</i> 
                      <ion-reorder  slot="end"> </ion-reorder>
                    </ion-item>
                  </ion-item>
                </ion-reorder-group>
              </ion-list>
            </ion-item>

            <ion-button class="ranking-btn" *ngIf="contestar[i]" (click)="contestar[i]=false">Dejar sin contestar</ion-button>
            <ion-button class="ranking-btn" *ngIf="!contestar[i]" (click)="contestar[i]=true">Preparar para contestar</ion-button>
  

          </div>



        </ion-list>
        
      
      </ion-slide>
      <!-- Slide N+1: fin de cuestionario -->
      <ion-slide>
       
        <ion-list style="text-align:center">

            <div style="margin-top: 235px;">
              <p>Cuestionario realizado correctamente.</p>
              <p> Haga click en "Finalizar" para guardar los cambios.</p>
            </div>
        
       
        </ion-list>
        
      </ion-slide>
      <!-- Slide N+2: resultados -->
      <ion-slide>
        <ion-list style="text-align:center">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
  
        
          <p style="font-size: 25px;">NOTA: <b>{{Nota}}</b> (sobre {{puntuacionMaxima}})</p>
       
         
            <ion-item *ngFor="let item of preguntasYRespuestas, let i = index">
              <ion-list *ngIf = "item.pregunta.Tipo === 'Cuatro opciones' || item.pregunta.Tipo === 'Verdadero o falso' || item.pregunta.Tipo === 'Respuesta abierta'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{item.pregunta.RespuestaCorrecta}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>
              <ion-list *ngIf = "item.pregunta.Tipo === 'Emparejamiento'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{item.pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "item.pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                <ion-item *ngIf = "contestar[i]">
                  <ion-list>
                      <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos; let j=index">
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{item.respuestas[j]}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>
                <ion-item *ngIf = "!contestar[i]">
                  En blanco 
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                <ion-item>
                  <ion-list>
                      <ion-item  *ngFor="let pareja of item.pregunta.Emparejamientos">
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.r}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>
            </ion-item>
        
      
        
        </ion-list>
      
      </ion-slide>
    </ion-slides>
  </div>

  
  <!-- El equipo no ha contestado el cuestionario de tipo Kahoot aun -->
    <!-- ESTO DE MOMENTO NO PUEDE PASAR POR QUE NO HAY KAHOOT EN EQUIPO -->
  <div *ngIf="!equipoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Kahoot'; ">
    <div>
      <ion-list *ngIf ="contar" style="text-align:right">
        <ion-label   style = "text-align: right; color: red; font-size: xx-large;">{{tiempoRestante}}</ion-label>    
      </ion-list>
      <!-- Aqui indico los botones de navegación que debe tener cada slideActual
      El slide 0 es el inicial. Se trata de empezar -->
      <div *ngIf = "slideActual === 0">
        <button class = "siguiente" mat-raised-button  (click)="ConfirmarPreparado(); next()">Empezar</button>
      </div>
      <!-- En el slide 1 es donde se muestran las preguntas. Solo debe aparecer el boton de ver respuestas cuando ya se han contestado todas -->
      <div *ngIf = "slideActual === 1 && tengoResultadoDelJuego">
        <button class = "siguiente" mat-raised-button  (click)="next()">Repasa tus respuestas</button>
      </div>
      <!-- En el slide 2 se muestran las respuestas -->
      <div *ngIf = "slideActual === 2">
        <button (click) = "Cerrar()" class = "siguiente">Cerrar</button>
      </div>
     
  
      
      <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
        <!-- En el slide 0 hay información del juego -->
        <ion-slide>
          <ion-list   style="text-align: center;">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
          
            <br>
      
            <p><b>Descripción: </b>{{descripcion}}</p>
            <p><b>Tipo: </b>Kahoot</p>
            
            <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
            <p><b>Tiempo de respuesta para cada pregunta: </b>{{tiempoLimite}} segundos</p>
            <!-- <button class = "ion-float-right siguiente" (click) = "IniciarTimer()" matStepperNext><i class="material-icons">arrow_forward_ios</i></button> -->
          </ion-list>
  
        
        </ion-slide>
        <!-- En el slide 1 se irán mostrando las preguntas -->
        <ion-slide>
          <!-- Podemos estar en tres estados diferentes: Mostrando la pregunta, esperando mostrarla (cuenta atrás), o esperando resultado final
          cuando ya hemos contestado todas las preguntas (y mostrandolo cuando llega) -->
  
          <ion-list  *ngIf ="preguntaAMostrar" style="text-align:center">
            <!-- Muestro la pregunta -->
            <label><h1 style="color:rgb(109, 11, 19)"><strong>{{cuentaAtras2}}</strong></h1></label>
            <br>
    
  
            <div *ngIf ="preguntaAMostrar.Tipo === 'Verdadero o falso'">
        
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>¿Verdadero o falso?</strong></h1></label>
              <br>
              <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
              <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
              <div class = "enColumna">
                <div class = "enFila" style = "width: 80%">
                  <div (click) = "GuardarRespuesta ('falso')" class = "opcion rojo"><p>Falso</p></div>
                  <div (click) = "GuardarRespuesta ('verdadero')"class = "opcion verde"><p>Verdadero</p></div>
                </div>
              </div>
  
            </div>
            
            <div *ngIf ="preguntaAMostrar.Tipo === 'Cuatro opciones'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Elije la opción correcta</strong></h1></label>
              <br>
              <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
              <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
              <div class = "enColumna">
                <div class = "enFila" style = "width: 80%">
                  <div (click) = "GuardarRespuesta (opcionesDesordenadas[0])" class = "opcion rojo"><p>{{opcionesDesordenadas[0]}}</p></div>
                  <div (click) = "GuardarRespuesta (opcionesDesordenadas[1])" class = "opcion verde"><p>{{opcionesDesordenadas[1]}}</p></div>
                </div>
                <div class = "enFila" style = "width: 80%">
                  <div (click) = "GuardarRespuesta (opcionesDesordenadas[2])" class = "opcion azul"><p>{{opcionesDesordenadas[2]}}</p></div>
                  <div (click) = "GuardarRespuesta (opcionesDesordenadas[3])" class = "opcion amarillo"><p>{{opcionesDesordenadas[3]}}</p></div>
                </div>
              </div>
      
            </div>
            
            <div *ngIf ="preguntaAMostrar.Tipo === 'Respuesta abierta'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Escribe tu respuesta</strong></h1></label>
              <br>
              <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
              <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
              <ion-input type="text" style = "color:rgb(38, 43, 105); font-size:x-large;" placeholder="Escribe tu respuesta aquí" requiered [(ngModel)]="RespuestasAlumno[0]"></ion-input> 
              <br>
              <br>
              <br>
              <button class="enviarRespuestaKahoot"  (click) = "CalcularPuntosYEnviar();">Enviar respuesta</button>
            </div>
  
            <div *ngIf ="preguntaAMostrar.Tipo === 'Emparejamiento'">
              <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Forma las parejas correctas</strong></h1></label>
              <label align = "center" style="color:rgb(109, 11, 19);"><strong>arrastrando la parte derecha <br>hasta la posición que le toca</strong></label>
  
              <br>
              <img *ngIf = "preguntaAMostrar.Imagen" style = "width: 250px; height: 250px" [src]="imagenPreguntaAMostrar" >
              <p style="font-size: 18px;">{{preguntaAMostrar.Pregunta}}</p>
  
              <ion-item>
                <ion-list style = "width:40%">
                    <ion-item  *ngFor="let pareja of preguntaAMostrar.Emparejamientos">
                      <ion-item lines = "none">
                        <ion-label  style = "font-size: small;">
                          {{pareja.l}}
                        </ion-label>
                      </ion-item>
                    </ion-item>
                </ion-list>
  
                <ion-list style = "width:60%">
                  <ion-reorder-group (ionItemReorder)="ReordenarRespuestas($event)" disabled="false">
            
                    <ion-item  *ngFor="let respuesta of RespuestasAlumno; let j=index;">
                      <ion-item *ngIf = "contestarEmparejamiento" style = "width:100%" lines = "none">
                        <ion-label style = "font-size: small;" >
                          {{respuesta}}
                        </ion-label>
                        <i class="material-icons" style = "color: gray">pan_tool</i> 
                        <ion-reorder  slot="end"> </ion-reorder>
                      </ion-item>
                    </ion-item>
                  </ion-reorder-group>
                </ion-list>
              </ion-item>
  
              <ion-button class="ranking-btn" *ngIf="contestarEmparejamiento" (click)="contestarEmparejamiento=false">Dejar sin contestar</ion-button>
              <ion-button class="ranking-btn" *ngIf="!contestarEmparejamiento" (click)="contestarEmparejamiento=true">Preparar para contestar</ion-button>
              <br>
              <br>
              <br>
              <button class="enviarRespuestaKahoot"  (click) = "CalcularPuntosYEnviar();">Enviar respuesta</button>
        
  
  
            </div>
  
            
          </ion-list>
          
          <ion-list  *ngIf ="!preguntaAMostrar && !finDelJuego" style="text-align:center">
            <!-- Muestro la cuenta atrás para presentar la siguiente pregunta -->
            <br>
            <br>
            <br>
            <br>
            <label style="color:rgb(109, 11, 19); font-size: large;"><strong>Pregunta {{siguiente + 1}} de {{PreguntasCuestionario.length}} en ...</strong></label>
            <br>
            <br>
            <br>
            <br>
  
            <label *ngIf = "cuentaAtras > 0" style="color:rgb(109, 11, 19); font-size: 15em;"><strong>{{cuentaAtras}}</strong></label>
  
          </ion-list>
          <ion-list  *ngIf ="!preguntaAMostrar && finDelJuego" style="text-align:center">
            <!-- Espero la llegada del resultado -->
            <br>
            <br>
            <br>
            <br>
            <label style="color:rgb(109, 11, 19); font-size: large;">Fin del juego<br> Esperando resultado ...</label>
            <br>
            <br>
            <br>
            <br>
            <!-- Cuando ya tengo el resultado lo muestro -->
            <div *ngIf = "tengoResultadoDelJuego">
              <label style="color:rgb(109, 11, 19); font-size:xx-large;">Clasificación final</label>
              <br>
              <br>
              <ion-list style = "width: 80%; margin-left: 15%;">
                <ion-item  *ngFor="let item of clasificacion">
                  <ion-item lines = "none" style = "width:30%">
                    <ion-label>
                      {{item.alumno.Nombre}}
                    </ion-label>
                  </ion-item>
                  <ion-item lines = "none" style = "width:30%">
                    <ion-label>
                      {{item.alumno.PrimerApellido}}
                    </ion-label>
                  </ion-item>
                  <ion-item lines = "none" style = "width:20%">
                    <ion-label  style = "color: green;">
                      {{item.puntos}}
                    </ion-label>
                  </ion-item>
                </ion-item>
              </ion-list>
            </div>
  
          </ion-list>
        
        </ion-slide>
         <!-- En el slide 2 mostramos las respuestas que ha dado el alumno -->
        <ion-slide>
          <ion-list *ngIf = "slideActual === 2" style="text-align:center">
            <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Tus respuestas</strong></h1></label>

              <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
                <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{respuestasKahoot[i][0]}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>
                <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                  <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                  <ion-item *ngIf = "contestar[i]">
                    <ion-list>
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
             
                            <ion-label *ngIf= "respuestasKahoot[i]" style = "font-size: small;">
                              {{respuestasKahoot[i][j]}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>
                  <ion-item *ngIf = "!contestar[i]">
                    En blanco 
                  </ion-item>
  
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                  <ion-item>
                    <ion-list>
                        <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.l}}
                            </ion-label>
                          </ion-item>
                          <ion-item lines = "none" style = "width: 50%">
                            <ion-label  style = "font-size: small;">
                              {{pareja.r}}
                            </ion-label>
                          </ion-item>
                        </ion-item>
                    </ion-list>
                  </ion-item>
  
                  <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
                </ion-list>
              </ion-item>

          </ion-list>
        </ion-slide>
      </ion-slides>
    </div>
  </div>

  <!-- El equipo ya ha contestado este cuestionario de tipo clasico -->
  <div *ngIf="equipoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Clásico'">
    <!-- En este caso solo hay dos slides: la de presentación del cuestionario y la que muestra las respuestas que dió el alumno -->

    <!-- Indico los botones de navegación de cada slide -->
    <div *ngIf = "slideActual === 0">
      <button class = "siguiente" style = "width: 150px" mat-raised-button  (click)="next(); empezado=true">Ver las respuestas</button>
    </div>
    <div *ngIf = "slideActual === 1">
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
    </div>
    
    <ion-slides style = "margin-top: 18%;"  #slides (ionSlideWillChange)="doCheck()" >
      <!-- Slide 0 con información del juego -->
      <ion-slide>
        <ion-list   style="text-align: center;">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>
  
        
          <br>
    
          <p><b>Descripción: </b>{{descripcion}}</p>
          <p><b>Tipo: </b>Clásico, en equipo</p>
          <p><b>Modo de puntuación: </b>Puntua el PRIMERO del equipo que responda</p>
          <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
          <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
          <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
          <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
          <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
          <br>
          <p style="font-size: 18px;">Tu equipo ya ha contestado este cuestionario.</p>
          <p style="font-size: 18px;">La nota obtenida es de: <b>{{equipoJuegoDeCuestionario.Nota}}</b></p>
  
        </ion-list>
      </ion-slide>

      <!-- Slide 1 con las respuestas que dió el alumno -->
      <ion-slide>
        <ion-list *ngIf = "PreguntasCuestionario && imagenesPreguntas" style="text-align:center">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
  
        
          <p style="font-size: 25px;">NOTA: <b>{{equipoJuegoDeCuestionario.Nota}}</b> (sobre {{puntuacionMaxima}})</p>
      
        
            <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
              <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Vuestra respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>

              <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Vuestra respuesta: </b></label></ion-item>
                <ion-item *ngIf = "contestar[i]">
                  <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
                  <ion-list style = "width: 200%">
                      <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{respuestasEmparejamientos[i][j]}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>
                <ion-item *ngIf = "!contestar[i]">
                  En blanco 
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                <ion-item>
                  <ion-list style = "width: 200%">
                      <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                        <ion-item lines = "none" style = "width: 50%" >
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%" >
                          <ion-label  style = "font-size: small;">
                            {{pareja.r}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>



            </ion-item>
        </ion-list>
      
      </ion-slide>
    </ion-slides>
  </div>

  <!-- El equipo ya ha contestado este cuestionario de tipo Kahoot -->
  <!-- ESTO DE MOMENTO NO PUEDE PASAR POR QUE NO HAY KAHOOT EN EQUIPO -->
  <div *ngIf="equipoJuegoDeCuestionario.Contestado && juegoSeleccionado.Modalidad === 'Kahoot'">
    <!-- En este caso solo hay dos slides: la de presentación del cuestionario y la que muestra las respuestas que dió el alumno -->
    <!-- Indico los botones de navegación de cada slide -->
    <div *ngIf = "slideActual === 0">
      <button class = "siguiente" style = "width: 150px" mat-raised-button  (click)="next()">Ver tus respuestas</button>
    </div>
    <div *ngIf = "slideActual === 1">
      <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
      <button (click) = "GoMisJuegos()" class = "siguiente">Cerrar</button>
    </div>
    
    <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
      <!-- Slide 0 con información del juego -->
      <ion-slide>
        <ion-list   style="text-align: center;">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>

        
          <br>
    
          <p><b>Descripción: </b>{{descripcion}}</p>
          <p><b>Tipo: </b>Kahoot</p>
          
          <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
          <p><b>Tiempo de respuesta para cada pregunta: </b>{{tiempoLimite}} segundos</p>
          <br>
          <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
          <p style="font-size: 18px;">Los puntos obtenidos son: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
          
        </ion-list>

      
      </ion-slide>

      <!-- Slide 1 con las respuestas que dió el alumno -->
      <ion-slide>
        <ion-list *ngIf = "respuestasPreparadas" style="text-align:center">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Resultados</strong></h1></label>
  
        
          <p style="font-size: 25px;">PUNTOS: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>
      
        
            <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
              <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>

              <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
                <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Tu respuesta: </b></label></ion-item>
                <ion-item *ngIf = "contestar[i]">
                  <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
                  <ion-list style = "width: 200%">
                      <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%">
                          <ion-label  style = "font-size: small;">
                            {{respuestasEmparejamientos[i][j]}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>
                <ion-item *ngIf = "!contestar[i]">
                  En blanco 
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
                <ion-item>
                  <ion-list style = "width: 200%">
                      <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                        <ion-item lines = "none" style = "width: 50%" >
                          <ion-label  style = "font-size: small;">
                            {{pareja.l}}
                          </ion-label>
                        </ion-item>
                        <ion-item lines = "none" style = "width: 50%" >
                          <ion-label  style = "font-size: small;">
                            {{pareja.r}}
                          </ion-label>
                        </ion-item>
                      </ion-item>
                  </ion-list>
                </ion-item>

                <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
              </ion-list>



            </ion-item>
        </ion-list>
      
      </ion-slide>
    </ion-slides>
  </div>

</ion-content>
<!-- Esto es para el caso de que el juego ya haya terminado -->
<ion-content *ngIf = "juegoSeleccionado && juegoSeleccionado.Tipo === 'Juego De Cuestionario' && juegoSeleccionado.JuegoTerminado && equipoJuegoDeCuestionario">
  <!-- En este caso tenemos 3 slides: presentación del juego, presentación de la clasificación final y presentación de las respuestas que dió el equipo

  Defino los botones de navegación de los slides -->
  <div *ngIf = "slideActual === 0">
    <button  class = "siguiente" style = "width: 180px" mat-raised-button  (click)="next()">Ver clasificación final</button>
  </div>
  <div *ngIf = "slideActual === 1">
    <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
    <button (click) = "next()" class = "siguiente" style = "width: 150px">Ver vuestras respuestas</button>
  </div>
  <div *ngIf = "slideActual === 2">
    <button  class = "anterior" (click) = "prev()" mat-raised-button>Anterior</button>
    <button (click) = "Volver()" class = "siguiente">Cerrar</button>
  </div>
  
  <ion-slides style = "margin-top: 18%;" #slides (ionSlideWillChange)="doCheck()" >
    <!-- Slide 0: datos del juego -->
    <ion-slide>
      <ion-list *ngIf="juegoSeleccionado.Modalidad === 'Clásico' "  style="text-align: center;">
        <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>

      
        <br>
  
        <p><b>Descripción: </b>{{descripcion}}</p>
        <p><b>Tipo: </b>Clásico, en equipo</p>
        <p><b>Modo de puntuación: </b>Puntua el PRIMERO del equipo que responda</p>
           
        <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
        <p><b>Puntuación por respuesta correcta: </b>{{puntuacionCorrecta}}</p>
        <p><b>Penalización por respuesta incorrecta: </b>{{puntuacionIncorrecta}}</p>
        <p *ngIf = "tiempoLimite !== 0"><b>Tiempo límite: </b>{{tiempoLimite}} segundos</p>
        <p *ngIf = "tiempoLimite === 0"><b>Sin límite de tiempo </b></p>
        <br>
        <p style="font-size: 18px;">Tu equipo ya ha contestado a este cuestionario.</p>
        <p style="font-size: 18px;">La nota obtenida es de: <b>{{equipoJuegoDeCuestionario.Nota}}</b></p>

      </ion-list>

      <ion-list  *ngIf="juegoSeleccionado.Modalidad === 'Kahoot' " style="text-align: center;">
        <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Datos del cuestionario</strong></h1></label>

      
        <br>
  
        <p><b>Descripción: </b>{{descripcion}}</p>
        <p><b>Tipo: </b>Kahoot</p>

        <p><b>Número de preguntas: </b>{{PreguntasCuestionario.length}}</p>
        <p><b>Tiempo de respuesta para cada pregunta: </b>{{tiempoLimite}} segundos</p>
        <br>
        <p style="font-size: 18px;">Ya has contestado a este cuestionario.</p>
        <p style="font-size: 18px;">Los puntos obtenidos son: <b>{{alumnoJuegoDeCuestionario.Nota}}</b></p>

      </ion-list>
    </ion-slide>
    <!-- Slide 1: clasificación final del juego -->
    <ion-slide>
      <ion-list style="text-align:center">
          <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Clasificación final</strong></h1></label>
          <br>
          
          <ion-list>
            <ion-item  lines = "none"*ngFor="let equipo of rankingEquiposPorNota">
              <ion-item lines = "none" style = "width: 20%">
                <img  *ngIf = "equipo.imagenPerfil" style = "width:40px; height: 40px;" [src]="equipo.imagenPerfil"> 
              </ion-item>
              <ion-item lines = "none" style = "width: 60%">
                <ion-label > {{equipo.nombre}}</ion-label>
              </ion-item>
              <ion-item lines = "none" style = "text-align:rigth">
                <ion-label style= " color: green"> {{equipo.nota}}</ion-label>
              </ion-item>
            </ion-item>
          </ion-list>


      </ion-list>
    </ion-slide>

    <!-- Slide 2: respuestas que dio el equipo -->
    <ion-slide>
      <ion-list *ngIf = "PreguntasCuestionario && imagenesPreguntas" style="text-align:center">
        <label align = "center"><h1 style="color:rgb(109, 11, 19)"><strong>Vuestras respuestas</strong></h1></label>

      
        <p style="font-size: 25px;">NOTA: <b>{{equipoJuegoDeCuestionario.Nota}}</b> (sobre {{puntuacionMaxima}})</p>




        
        <ion-item *ngFor="let pregunta of PreguntasCuestionario, let i = index">
          <ion-list *ngIf = "pregunta.Tipo === 'Cuatro opciones' || pregunta.Tipo === 'Verdadero o falso' || pregunta.Tipo === 'Respuesta abierta'">
            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
            <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Vuestra respuesta: </b>{{RespuestasAlumno[i]}}</label></ion-item>
            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b>{{pregunta.RespuestaCorrecta}}</label></ion-item>
            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
          </ion-list>

          <ion-list *ngIf = "pregunta.Tipo === 'Emparejamiento'">
            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Pregunta {{i+1}}: </b>{{pregunta.Pregunta}}</label></ion-item>
            <img *ngIf = "pregunta.Imagen" style = "width: 80px; height: 80px; margin-left: 10px;" [src]="imagenesPreguntas[i]" >
            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Vuestra respuesta: </b></label></ion-item>
            <ion-item *ngIf = "contestar[i]">
              <!-- No entiendo por qué tengo que poner aquí una anchura del 200% -->
              <ion-list style = "width: 200%">
                  <ion-item  *ngFor="let pareja of pregunta.Emparejamientos; let j=index">
                    <ion-item lines = "none" style = "width: 50%">
                      <ion-label  style = "font-size: small;">
                        {{pareja.l}}
                      </ion-label>
                    </ion-item>
                    <ion-item lines = "none" style = "width: 50%">
                      <ion-label  style = "font-size: small;">
                        {{respuestasEmparejamientos[i][j]}}
                      </ion-label>
                    </ion-item>
                  </ion-item>
              </ion-list>
            </ion-item>
            <ion-item *ngIf = "!contestar[i]">
              En blanco 
            </ion-item>

            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Respuesta correcta: </b></label></ion-item>
            <ion-item>
              <ion-list style = "width: 200%">
                  <ion-item  *ngFor="let pareja of pregunta.Emparejamientos">
                    <ion-item lines = "none" style = "width: 50%" >
                      <ion-label  style = "font-size: small;">
                        {{pareja.l}}
                      </ion-label>
                    </ion-item>
                    <ion-item lines = "none" style = "width: 50%" >
                      <ion-label  style = "font-size: small;">
                        {{pareja.r}}
                      </ion-label>
                    </ion-item>
                  </ion-item>
              </ion-list>
            </ion-item>

            <ion-item lines = "none"><label style = "font-size: smaller;"><b>Comentario: </b>{{feedbacks[i]}}</label></ion-item>
          </ion-list>



        </ion-item>
    
      </ion-list>
    
    </ion-slide>
  </ion-slides>
</ion-content>
